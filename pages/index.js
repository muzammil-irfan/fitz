import Head from "next/head";
import BmiCalculatorSection from "../components/Home/BmiCalculatorSection";
import DownloadAppSection from "../components/Home/DownloadAppSection";
import FootballPlayerSection from "../components/Home/FootballPlayerSection";
import ThingsSection from "../components/Home/ThingsSection";
import ThingsSection2 from "../components/Home/ThingsSection2";
import ThingsSection3 from "../components/Home/ThingsSection3";
import Layout from "../components/Layout";
import "slick-carousel/slick/slick.css";
import "slick-carousel/slick/slick-theme.css";
import BannerSection from "../components/Home/BannerSection";
import LookingForSection from "../components/Home/LookingForSection";
import BlogSection from "../components/Home/BlogSection";
import axios from "axios";
import backendHost from "../utils/backendHost";

export default function Home({dir,categories,blogs}) {
  
  
  return (
    <Layout categories={categories} dir={dir}>
      <Head>
        <title>Fitz Cornerz</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/logo-small.png" />
      </Head>

        <BannerSection />
        <LookingForSection data={categories} />
        <BlogSection data={blogs} />
        <BmiCalculatorSection />
        <ThingsSection />
        <FootballPlayerSection />
        <ThingsSection2 />
        <ThingsSection3 />
        <DownloadAppSection />
    </Layout>
  );
}

export async function getStaticProps(context) {
  const props = {
    categories: [],
    blogs:[]
  };
  try {
    //To obtain slug from category
    const {locale} = context;
    // const config = {
    //   headers:{
    //     "Accept-Language":locale
    //   }
    // }
    const categories = await axios.get(`${backendHost}/category`,{
      headers:{
        "Accept-Language":locale
      }
    });
    props.categories = [...categories.data];
    const blogs = await axios.get(`${backendHost}/blog`,{
      headers:{
        "Accept-Language":locale
      }
    });
    props.blogs = [...blogs.data];
    
    return {props};
  } catch (err) {
    console.log(err);
    return {props};
  }
}